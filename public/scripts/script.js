(()=>{var t={10:(t,e,n)=>{var i,o;i=[n,e,n(697),n(695),n(882)],o=function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initAddNodeMenu=void 0,e.initAddNodeMenu=function(t){var e=document.getElementById("node-menu");e.addEventListener("mousedown",(function(t){0==t.button&&t.stopPropagation()}));var s=document.getElementById("node-tree-view"),r={},a=function(a){var p=i.nodeDefinitions[a];p.category in r||(r[p.category]=function(t,e){var n=document.createElement("li");n.classList.add("branch"),n.addEventListener("click",(function(){return n.classList.toggle("expanded")}));var i=document.createElement("div"),o=document.createElement("span");o.classList.add("material-symbols-rounded"),i.appendChild(o);var s=document.createElement("span");s.textContent=e,i.appendChild(s),n.appendChild(i);var r=document.createElement("ul");return n.appendChild(r),t.appendChild(n),r}(s,p.category)),function(t,e){var n=document.createElement("li");n.classList.add("branch");var i=document.createElement("div"),o=document.createElement("span");return o.textContent=e,i.appendChild(o),n.appendChild(i),t.appendChild(n),n}(r[p.category],p.name).addEventListener("click",(function(i){if(0==i.button){i.stopPropagation();var s=t.viewportToAreaPoint((0,o.getTopLeft)(e));t.nodes.push(new n.Node(t,a,s)),e.classList.remove("visible")}}))};for(var p in i.nodeDefinitions)a(p)}}.apply(e,i),void 0===o||(t.exports=o)},712:(t,e,n)=>{var i;i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LiteEvent=void 0;var n=function(){function t(){this.handlers=[]}return t.prototype.addListener=function(t){this.handlers.push(t)},t.prototype.removeListener=function(t){this.handlers=this.handlers.filter((function(e){return e!==t}))},t.prototype.dispatch=function(t){this.handlers.slice(0).forEach((function(e){return e(t)}))},t.prototype.expose=function(){return this},t}();e.LiteEvent=n}.apply(e,[n,e]),void 0===i||(t.exports=i)},717:(t,e,n)=>{var i,o;i=[n,e,n(307),n(173),n(882)],o=function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;var s=function(){function t(){var t=this;this.nodes=[],this._panning=!1,this._dragging=!1,this._dragNode=null,this._linking=!1,this._linkPin=null,this.viewport=document.getElementById("graph-viewport"),this.graphArea=document.getElementById("graph-area"),this._drawingLink=new i.Link,this._drawingLink.reset(),this.viewport.addEventListener("mousedown",(function(e){return t.onMouseDown(e)})),this.viewport.addEventListener("mousemove",(function(e){return t.onMouseMove(e)})),this.viewport.addEventListener("mouseup",(function(e){return t.onMouseUp(e)})),this.viewport.addEventListener("contextmenu",(function(e){return t.onContextMenu(e)}))}return t.prototype.beginDrag=function(t,e){this._panning||this._linking||(this._dragNode=t,this._dragNode.element.style.cursor="grabbing",this._dragCursorBegin=e,this._dragTargetBegin=this._dragNode.position,this._dragging=!0)},t.prototype.beginLink=function(t){if(!this._panning&&!this._dragging){this._linkPin=t,this._linking=!0;var e=this._linkPin.position;this._drawingLink.setPoints(e,e)}},t.prototype.endLink=function(t){if(this._linkPin!=t&&this._linkPin.type!=t.type&&this._linkPin.node!=t.node&&this._linkPin.valueType==t.valueType){var e=void 0;switch(this._linkPin.type){case n.PinType.Output:e=new i.Link(this._linkPin,t);break;case n.PinType.Input:e=new i.Link(t,this._linkPin)}this._linkPin.addLink(e),t.addLink(e)}this._drawingLink.reset(),this._linking=!1},t.prototype.viewportToAreaPoint=function(t){var e=(0,o.getTranslation)(this.graphArea);return t.subtract(e.x,e.y)},t.prototype.onMouseDown=function(t){0==t.button&&document.getElementById("node-menu").classList.remove("visible"),1!=t.button||this._dragging||this._linking||(this._dragTargetBegin=(0,o.getTranslation)(this.graphArea),this._dragCursorBegin=new o.Point(t.clientX,t.clientY),this._panning=!0)},t.prototype.onMouseMove=function(t){if(this._panning){var e=new o.Point(this._dragTargetBegin.x+t.clientX-this._dragCursorBegin.x,this._dragTargetBegin.y+t.clientY-this._dragCursorBegin.y);(0,o.setTranslation)(this.graphArea,e)}if(this._dragging&&(e=new o.Point(this._dragTargetBegin.x+t.clientX-this._dragCursorBegin.x,this._dragTargetBegin.y+t.clientY-this._dragCursorBegin.y),this._dragNode.position=e),this._linking){var i=this.graphArea.getBoundingClientRect();switch(e=new o.Point(t.clientX-i.left,t.clientY-i.top),this._linkPin.type){case n.PinType.Output:this._drawingLink.endPoint=e;break;case n.PinType.Input:this._drawingLink.startPoint=e}}},t.prototype.onMouseUp=function(t){this._panning&&(this._panning=!1),this._dragging&&(this._dragNode.element.style.cursor=null,this._dragNode=null,this._dragging=!1),this._linking&&(this._drawingLink.reset(),this._linking=!1)},t.prototype.onContextMenu=function(t){t.preventDefault();var e=this.viewport.getBoundingClientRect(),n=document.getElementById("node-menu"),i=n.getBoundingClientRect(),o=t.clientX>e.width/2;n.style.left="".concat(t.clientX-e.x-(o?i.width:0),"px"),n.style.top="".concat(t.clientY-e.y,"px"),n.classList.add("visible");var s=document.getElementById("node-search-bar");s.value="",s.focus()},t}();e.Graph=s}.apply(e,i),void 0===o||(t.exports=o)},607:(t,e,n)=>{var i,o;i=[n,e,n(717),n(697),n(882),n(10)],void 0===(o=function(t,e,n,i,o,s){"use strict";var r=[{id:0,type:"start",posX:32,posY:32,inLinks:[],outLinks:[{node:1,index:0}]},{id:1,type:"add",posX:160,posY:32,inLinks:[{node:0,index:0},{node:null}],outLinks:[{node:null}]},{id:2,type:"if",posX:288,posY:32,inLinks:[],outLinks:[]}],a=new n.Graph;(0,s.initAddNodeMenu)(a);for(var p=0;p<r.length;p++){var u=r[p];a.nodes.push(new i.Node(a,u.type,new o.Point(u.posX,u.posY)))}}.apply(e,i))||(t.exports=o)},173:(t,e,n)=>{var i,o;i=[n,e,n(882)],o=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Link=void 0;var i=function(){function t(t,e){null!=t&&null!=t?(this._startPin=t,this._startPoint=t.position):(this._startPin=null,this._startPoint=new n.Point),null!=e&&null!=e?(this._endPin=e,this._endPoint=e.position):(this._endPin=null,this._endPoint=new n.Point),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.classList.add("graph-link"),this._path=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.appendChild(this._path),document.getElementById("graph-links").appendChild(this._element),this.updatePath()}return Object.defineProperty(t.prototype,"startPin",{get:function(){return this._startPin},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endPin",{get:function(){return this._endPin},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startPoint",{set:function(t){this._startPoint=t,this.updatePath()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endPoint",{set:function(t){this._endPoint=t,this.updatePath()},enumerable:!1,configurable:!0}),t.prototype.setPoints=function(t,e){this._startPoint=t,this._endPoint=e,this.updatePath()},t.prototype.reset=function(){this._startPoint=new n.Point(0,0),this._endPoint=new n.Point(0,0),this._path.setAttribute("d","")},t.prototype.destroy=function(){this._path.parentElement.removeChild(this._path),this._startPin.breakLink(this),this._endPin.breakLink(this)},t.prototype.updatePath=function(){var e=this._startPoint.x+t.curve,i=this._endPoint.x-t.curve,o=new n.Rect,s=new n.Point,r=new n.Point;this._startPoint.x<=i?(o.x=this._startPoint.x,o.width=this._endPoint.x-this._startPoint.x,r.x=o.width):(o.x=i,o.width=e-i,s.x=this._startPoint.x-i,r.x=t.curve),this._startPoint.y<=this._endPoint.y?(o.y=this._startPoint.y-2,o.height=this._endPoint.y-this._startPoint.y+4,s.y=2,r.y=o.height-2):(o.y=this._endPoint.y-2,o.height=this._startPoint.y-this._endPoint.y+4,s.y=o.height-2,r.y=2),(0,n.setTranslation)(this._element,new n.Point(o.x,o.y)),this._element.setAttribute("width","".concat(o.width)),this._element.setAttribute("height","".concat(o.height)),this._path.setAttribute("d","M ".concat(s.x," ").concat(s.y," C ").concat(s.x+t.curve," ").concat(s.y,", ").concat(r.x-t.curve," ").concat(r.y,", ").concat(r.x," ").concat(r.y))},t.curve=32,t}();e.Link=i}.apply(e,i),void 0===o||(t.exports=o)},695:(t,e,n)=>{var i;i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.nodeDefinitions=void 0,e.nodeDefinitions={start:{name:"Start",category:"Flow",inputs:[],outputs:[{name:"",type:"Flow"}]},if:{name:"If",category:"Flow",inputs:[{name:"",type:"Flow"},{name:"Condition",type:"Bool"}],outputs:[{name:"True",type:"Flow"},{name:"False",type:"Flow"}]},while:{name:"While",category:"Flow",inputs:[{name:"",type:"Flow"},{name:"Condition",type:"Bool"}],outputs:[{name:"Exit",type:"Flow"},{name:"Body",type:"Flow"}]},for:{name:"For",category:"Flow",inputs:[{name:"",type:"Flow"},{name:"Start",type:"Int"},{name:"Last",type:"Int"},{name:"Step",type:"Int"}],outputs:[{name:"Exit",type:"Flow"},{name:"Body",type:"Flow"}]},add:{name:"Add",category:"Math",inputs:[{name:"A",type:"Int"},{name:"B",type:"Int"}],outputs:[{name:"",type:"Int"}]},subtract:{name:"Subtract",category:"Math",inputs:[{name:"A",type:"Int"},{name:"B",type:"Int"}],outputs:[{name:"",type:"Int"}]},multipy:{name:"Multiply",category:"Math",inputs:[{name:"A",type:"Int"},{name:"B",type:"Int"}],outputs:[{name:"",type:"Int"}]},divide:{name:"Divide",category:"Math",inputs:[{name:"A",type:"Int"},{name:"B",type:"Int"}],outputs:[{name:"",type:"Int"}]},and:{name:"And",category:"Logic",inputs:[{name:"A",type:"Bool"},{name:"B",type:"Bool"}],outputs:[{name:"",type:"Bool"}]},or:{name:"Or",category:"Logic",inputs:[{name:"A",type:"Bool"},{name:"B",type:"Bool"}],outputs:[{name:"",type:"Bool"}]},not:{name:"Not",category:"Logic",inputs:[{name:"",type:"Bool"}],outputs:[{name:"",type:"Bool"}]},equal:{name:"Equal",category:"Logic",inputs:[{name:"A",type:"Int"},{name:"B",type:"Int"}],outputs:[{name:"",type:"Bool"}]},notEqual:{name:"Not Equal",category:"Logic",inputs:[{name:"A",type:"Int"},{name:"B",type:"Int"}],outputs:[{name:"",type:"Bool"}]},less:{name:"Less",category:"Logic",inputs:[{name:"A",type:"Int"},{name:"B",type:"Int"}],outputs:[{name:"",type:"Bool"}]},lessOrEqual:{name:"Less Or Equal",category:"Logic",inputs:[{name:"A",type:"Int"},{name:"B",type:"Int"}],outputs:[{name:"",type:"Bool"}]},greater:{name:"Greater",category:"Logic",inputs:[{name:"A",type:"Int"},{name:"B",type:"Int"}],outputs:[{name:"",type:"Bool"}]},greaterOrEqual:{name:"Greater Or Equal",category:"Logic",inputs:[{name:"A",type:"Int"},{name:"B",type:"Int"}],outputs:[{name:"",type:"Bool"}]}}}.apply(e,[n,e]),void 0===i||(t.exports=i)},697:(t,e,n)=>{var i,o;i=[n,e,n(307),n(695),n(882)],o=function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Node=void 0;var s=function(){function t(t,e,o){var s=this;if(this._inputs=[],this._outputs=[],this._graph=t,this._type=e,e in i.nodeDefinitions){var u=i.nodeDefinitions[e];this.element=document.createElement("div"),this.element.addEventListener("mousedown",(function(t){return s.onMouseDown(t)})),this.element.classList.add("graph-node");var l=document.createElement("div");l.classList.add("head");var d=document.createElement("span");d.innerHTML=u.name,l.appendChild(d),this.element.appendChild(l);var c=document.createElement("div");c.classList.add("body"),this.element.appendChild(c);for(var h=Math.max(u.inputs.length,u.outputs.length),g=function(t){var e=t+1;if(t<u.inputs.length){var i=u.inputs[t],o=p(i.type),s=new n.Pin(y._graph,y,o,n.PinType.Input);s.element.style.gridColumn="1",s.element.style.gridRow=e.toString(),c.appendChild(s.element);var l=document.createElement("span");l.innerHTML=i.name,l.style.gridColumn="2",l.style.gridRow=e.toString(),c.appendChild(l);var d=null;o!=n.ValueType.Flow&&(o&(n.ValueType.Int|n.ValueType.Float|n.ValueType.String)?d=new a:o==n.ValueType.Boolean&&(d=new r),d.element.style.gridColumn="3",d.element.style.gridRow=e.toString(),c.appendChild(d.element),s.onLinksChanged.addListener((function(t){d.element.style.visibility=t>0?"hidden":"visible"}))),y._inputs.push({pin:s,valueField:d})}if(t<u.outputs.length){var h=u.outputs[t],g=(o=p(h.type),document.createElement("span"));g.classList.add("text-right"),g.innerHTML=h.name,g.style.gridColumn="5",g.style.gridRow=e.toString(),c.appendChild(g);var m=new n.Pin(y._graph,y,o);m.element.style.gridColumn="6",m.element.style.gridRow=e.toString(),y._outputs.push(m),c.appendChild(m.element)}},y=this,m=0;m<h;m++)g(m);document.getElementById("graph-nodes").appendChild(this.element),this.position=o}else console.error("Invalid node types")}return Object.defineProperty(t.prototype,"position",{get:function(){return(0,o.getTranslation)(this.element)},set:function(t){(0,o.setTranslation)(this.element,t),this._inputs.forEach((function(t){return t.pin.updateLinkPositions()})),this._outputs.forEach((function(t){return t.updateLinkPositions()}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.prototype.getInput=function(t){var e=this._inputs[t];return e.pin.links.length>0?e.pin.links[0].startPin.node:e.valueField.value},t.prototype.onMouseDown=function(t){if(t.target.classList.contains("graph-node")&&0==t.button){t.preventDefault();var e=new o.Point(t.clientX,t.clientY);this._graph.beginDrag(this,e)}},t}();e.Node=s;var r=function(){function t(){var t=this;this._element=document.createElement("div"),this._element.classList.add("checkbox");var e=document.createElement("span");e.classList.add("material-symbols-rounded"),e.innerHTML="check",this._element.appendChild(e),this._element.addEventListener("click",(function(){t.checked=!t._checked}))}return Object.defineProperty(t.prototype,"checked",{set:function(t){this._checked=t,this._element.setAttribute("checked","".concat(this._checked))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._checked?"true":"false"},enumerable:!1,configurable:!0}),t}(),a=function(){function t(){this._element=document.createElement("span"),this._element.classList.add("input"),this._element.setAttribute("role","textbox"),this._element.setAttribute("contenteditable","true")}return Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._element.textContent},enumerable:!1,configurable:!0}),t}();function p(t){switch(t){case"Flow":default:return n.ValueType.Flow;case"Int":return n.ValueType.Int;case"Float":return n.ValueType.Float;case"String":return n.ValueType.String;case"Bool":return n.ValueType.Boolean}}}.apply(e,i),void 0===o||(t.exports=o)},307:(t,e,n)=>{var i,o;i=[n,e,n(712),n(882)],o=function(t,e,n,i){"use strict";var o,s;Object.defineProperty(e,"__esModule",{value:!0}),e.Pin=e.ValueType=e.PinType=void 0,function(t){t[t.Output=0]="Output",t[t.Input=1]="Input"}(o=e.PinType||(e.PinType={})),function(t){t[t.Flow=1]="Flow",t[t.Int=2]="Int",t[t.Float=4]="Float",t[t.String=8]="String",t[t.Boolean=16]="Boolean"}(s=e.ValueType||(e.ValueType={}));var r=function(){function t(t,e,i,r){void 0===r&&(r=o.Output);var a=this;switch(this._type=o.Output,this.links=[],this.linksChangedEvent=new n.LiteEvent,this._graph=t,this._node=e,this._type=r,this._valueType=i,this.element=document.createElement("div"),this.element.classList.add("pin"),this._type==o.Output&&this.element.classList.add("right"),this.element.addEventListener("mousedown",(function(t){return a.onMouseDown(t)})),this.element.addEventListener("mouseup",(function(t){return a.onMouseUp(t)})),this.element.addEventListener("mouseenter",(function(t){return a.onMouseEnter(t)})),this.element.addEventListener("mouseleave",(function(t){return a.onMouseExit(t)})),this.element.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.graphic=document.createElement("div"),this.graphic.classList.add("pin-graphic"),this._valueType){case s.Flow:this.graphic.classList.add("type-flow");break;case s.Int:this.graphic.classList.add("type-int");break;case s.Float:this.graphic.classList.add("type-float");break;case s.String:this.graphic.classList.add("type-string");break;case s.Boolean:this.graphic.classList.add("type-boolean")}this.element.appendChild(this.graphic)}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valueType",{get:function(){return this._valueType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"node",{get:function(){return this._node},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLinksChanged",{get:function(){return this.linksChangedEvent.expose()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){var t=this._graph.graphArea.getBoundingClientRect(),e=this.element.getBoundingClientRect();return new i.Point(e.left+e.width/2-t.left,e.top+e.height/2-t.top)},enumerable:!1,configurable:!0}),t.prototype.addLink=function(t){this.links.push(t),this.setGraphicSolid(!0),this.linksChangedEvent.dispatch(this.links.length)},t.prototype.breakLink=function(t){var e=this.links.indexOf(t);e>-1&&this.links.splice(e,1),this.links.length<=0&&this.setGraphicSolid(!1),this.linksChangedEvent.dispatch(this.links.length)},t.prototype.updateLinkPositions=function(){var t=this;switch(this._type){case o.Output:this.links.forEach((function(e){e.startPoint=t.position}));break;case o.Input:this.links.forEach((function(e){e.endPoint=t.position}))}},t.prototype.setGraphicSolid=function(t){t?this.element.classList.add("solid"):this.element.classList.remove("solid")},t.prototype.onMouseDown=function(t){if(t.target.classList.contains("pin"))if(0==t.button)t.preventDefault(),t.stopPropagation(),this._graph.beginLink(this);else if(2==t.button){t.preventDefault(),t.stopPropagation();for(var e=this.links.length,n=0;n<e;n++)this.links[0].destroy()}},t.prototype.onMouseUp=function(t){t.target.classList.contains("pin")&&0==t.button&&this._graph.endLink(this)},t.prototype.onMouseEnter=function(t){this.setGraphicSolid(!0)},t.prototype.onMouseExit=function(t){this.links.length<=0&&this.setGraphicSolid(!1)},t}();e.Pin=r}.apply(e,i),void 0===o||(t.exports=o)},882:(t,e,n)=>{var i;i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setTranslation=e.getTopLeft=e.getTranslation=e.Rect=e.Point=void 0;var n=function(){function t(t,e){this.x=null!=t?t:0,this.y=null!=e?e:0}return t.prototype.add=function(t,e){return this.x+=t,this.y+=e,this},t.prototype.subtract=function(t,e){return this.x-=t,this.y-=e,this},t}();e.Point=n;e.Rect=function(t,e,n,i){this.x=null!=t?t:0,this.y=null!=e?e:0,this.width=null!=n?n:0,this.height=null!=i?i:0},e.getTranslation=function(t){var e=window.getComputedStyle(t),i=new DOMMatrixReadOnly(e.transform);return new n(i.m41,i.m42)},e.getTopLeft=function(t){return new n(t.offsetLeft,t.offsetTop)},e.setTranslation=function(t,e){t.style.transform="translate(".concat(e.x,"px, ").concat(e.y,"px)")}}.apply(e,[n,e]),void 0===i||(t.exports=i)}},e={};!function n(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}(607)})();
//# sourceMappingURL=script.js.map