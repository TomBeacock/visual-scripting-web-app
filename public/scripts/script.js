(()=>{var t={385:(t,e,n)=>{var i,o;i=[n,e,n(697),n(447),n(882)],o=function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initAddNodeMenu=void 0,e.initAddNodeMenu=function(t){var e=document.getElementById("node-menu");e.addEventListener("mousedown",(function(t){0==t.button&&t.stopPropagation()}));var s=document.getElementById("node-tree-view"),r={},a=function(a){var d=i.nodeDefinitions[a];d.category in r||(r[d.category]=function(t,e){var n=document.createElement("li");n.classList.add("branch"),n.addEventListener("click",(function(){return n.classList.toggle("expanded")}));var i=document.createElement("div"),o=document.createElement("span");o.classList.add("material-symbols-rounded"),i.appendChild(o);var s=document.createElement("span");s.textContent=e,i.appendChild(s),n.appendChild(i);var r=document.createElement("ul");return n.appendChild(r),t.appendChild(n),r}(s,d.category)),function(t,e){var n=document.createElement("li");n.classList.add("branch");var i=document.createElement("div"),o=document.createElement("span");return o.textContent=e,i.appendChild(o),n.appendChild(i),t.appendChild(n),n}(r[d.category],d.name).addEventListener("click",(function(i){if(0==i.button){i.stopPropagation();var s=t.viewportToAreaPoint((0,o.getTopLeft)(e));t.nodes.push(new n.Node(t,a,s)),e.classList.remove("visible")}}))};for(var d in i.nodeDefinitions)a(d)}}.apply(e,i),void 0===o||(t.exports=o)},941:(t,e,n)=>{var i;i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CheckBox=void 0;var n=function(){function t(){var t=this;this.element=document.createElement("div"),this.element.classList.add("checkbox");var e=document.createElement("span");e.classList.add("material-symbols-rounded"),e.innerHTML="check",this.element.appendChild(e),this.element.addEventListener("click",(function(){return t.setChecked(!t.checked)}))}return t.prototype.setChecked=function(t){this.checked=t,this.element.setAttribute("checked","".concat(this.checked))},t}();e.CheckBox=n}.apply(e,[n,e]),void 0===i||(t.exports=i)},712:(t,e,n)=>{var i;i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LiteEvent=void 0;var n=function(){function t(){this.handlers=[]}return t.prototype.addListener=function(t){this.handlers.push(t)},t.prototype.removeListener=function(t){this.handlers=this.handlers.filter((function(e){return e!==t}))},t.prototype.dispatch=function(t){this.handlers.slice(0).forEach((function(e){return e(t)}))},t.prototype.expose=function(){return this},t}();e.LiteEvent=n}.apply(e,[n,e]),void 0===i||(t.exports=i)},717:(t,e,n)=>{var i,o;i=[n,e,n(307),n(173),n(882)],o=function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;var s=function(){function t(){var t=this;this.nodes=[],this.panning=!1,this.dragging=!1,this.dragNode=null,this.linking=!1,this.linkPin=null,this.viewport=document.getElementById("graph-viewport"),this.graphArea=document.getElementById("graph-area"),this.drawingLink=new i.Link,this.drawingLink.reset(),this.viewport.addEventListener("mousedown",(function(e){return t.onMouseDown(e)})),this.viewport.addEventListener("mousemove",(function(e){return t.onMouseMove(e)})),this.viewport.addEventListener("mouseup",(function(e){return t.onMouseUp(e)})),this.viewport.addEventListener("contextmenu",(function(e){return t.onContextMenu(e)}))}return t.prototype.onMouseDown=function(t){0==t.button&&document.getElementById("node-menu").classList.remove("visible"),1!=t.button||this.dragging||this.linking||(this.dragTargetBegin=(0,o.getTranslation)(this.graphArea),this.dragCursorBegin=new o.Point(t.clientX,t.clientY),this.panning=!0)},t.prototype.onMouseMove=function(t){if(this.panning){var e=new o.Point(this.dragTargetBegin.x+t.clientX-this.dragCursorBegin.x,this.dragTargetBegin.y+t.clientY-this.dragCursorBegin.y);(0,o.setTranslation)(this.graphArea,e)}if(this.dragging&&(e=new o.Point(this.dragTargetBegin.x+t.clientX-this.dragCursorBegin.x,this.dragTargetBegin.y+t.clientY-this.dragCursorBegin.y),this.dragNode.setPosition(e)),this.linking){var i=this.graphArea.getBoundingClientRect();switch(e=new o.Point(t.clientX-i.left,t.clientY-i.top),this.linkPin.getType()){case n.PinType.Output:this.drawingLink.setEndPoint(e);break;case n.PinType.Input:this.drawingLink.setStartPoint(e)}}},t.prototype.onMouseUp=function(t){this.panning&&(this.panning=!1),this.dragging&&(this.dragNode.element.style.cursor=null,this.dragNode=null,this.dragging=!1),this.linking&&(this.drawingLink.reset(),this.linking=!1)},t.prototype.onContextMenu=function(t){t.preventDefault();var e=this.viewport.getBoundingClientRect(),n=document.getElementById("node-menu"),i=n.getBoundingClientRect(),o=t.clientX>e.width/2;n.style.left="".concat(t.clientX-e.x-(o?i.width:0),"px"),n.style.top="".concat(t.clientY-e.y,"px"),n.classList.add("visible");var s=document.getElementById("node-search-bar");s.value="",s.focus()},t.prototype.beginDrag=function(t,e){this.panning||this.linking||(this.dragNode=t,this.dragNode.element.style.cursor="grabbing",this.dragCursorBegin=e,this.dragTargetBegin=this.dragNode.getPosition(),this.dragging=!0)},t.prototype.beginLink=function(t){if(!this.panning&&!this.dragging){this.linkPin=t,this.linking=!0;var e=this.linkPin.getPosition();this.drawingLink.setPoints(e,e)}},t.prototype.endLink=function(t){if(this.linkPin!=t&&this.linkPin.getType()!=t.getType()&&this.linkPin.getNode()!=t.getNode()&&this.linkPin.getValueType()==t.getValueType()){var e=void 0;switch(this.linkPin.getType()){case n.PinType.Output:e=new i.Link(this.linkPin,t);break;case n.PinType.Input:e=new i.Link(t,this.linkPin)}this.linkPin.addLink(e),t.addLink(e)}this.drawingLink.reset(),this.linking=!1},t.prototype.viewportToAreaPoint=function(t){var e=(0,o.getTranslation)(this.graphArea);return t.subtract(e.x,e.y)},t}();e.Graph=s}.apply(e,i),void 0===o||(t.exports=o)},607:(t,e,n)=>{var i,o;i=[n,e,n(717),n(697),n(882),n(385)],void 0===(o=function(t,e,n,i,o,s){"use strict";var r=[{id:0,type:"start",posX:32,posY:32,inLinks:[],outLinks:[{node:1,index:0}]},{id:1,type:"add",posX:160,posY:32,inLinks:[{node:0,index:0},{node:null}],outLinks:[{node:null}]},{id:2,type:"if",posX:288,posY:32,inLinks:[],outLinks:[]}],a=new n.Graph;(0,s.initAddNodeMenu)(a);for(var d=0;d<r.length;d++){var u=r[d];a.nodes.push(new i.Node(a,u.type,new o.Point(u.posX,u.posY)))}}.apply(e,i))||(t.exports=o)},173:(t,e,n)=>{var i,o;i=[n,e,n(882)],o=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Link=void 0;var i=function(){function t(t,e){null!=t&&null!=t?(this.startPin=t,this.startPoint=t.getPosition()):(this.startPin=null,this.startPoint=new n.Point),null!=e&&null!=e?(this.endPin=e,this.endPoint=e.getPosition()):(this.endPin=null,this.endPoint=new n.Point),this.element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.element.classList.add("graph-link"),this.path=document.createElementNS("http://www.w3.org/2000/svg","path"),this.element.appendChild(this.path),document.getElementById("graph-links").appendChild(this.element),this.updatePath()}return t.prototype.setStartPoint=function(t){this.startPoint=t,this.updatePath()},t.prototype.setEndPoint=function(t){this.endPoint=t,this.updatePath()},t.prototype.setPoints=function(t,e){this.startPoint=t,this.endPoint=e,this.updatePath()},t.prototype.reset=function(){this.startPoint=new n.Point(0,0),this.endPoint=new n.Point(0,0),this.path.setAttribute("d","")},t.prototype.destroy=function(){this.path.parentElement.removeChild(this.path),this.startPin.breakLink(this),this.endPin.breakLink(this)},t.prototype.updatePath=function(){var e=this.startPoint.x+t.curve,i=this.endPoint.x-t.curve,o=new n.Rect,s=new n.Point,r=new n.Point;this.startPoint.x<=i?(o.x=this.startPoint.x,o.width=this.endPoint.x-this.startPoint.x,r.x=o.width):(o.x=i,o.width=e-i,s.x=this.startPoint.x-i,r.x=t.curve),this.startPoint.y<=this.endPoint.y?(o.y=this.startPoint.y-2,o.height=this.endPoint.y-this.startPoint.y+4,s.y=2,r.y=o.height-2):(o.y=this.endPoint.y-2,o.height=this.startPoint.y-this.endPoint.y+4,s.y=o.height-2,r.y=2),(0,n.setTranslation)(this.element,new n.Point(o.x,o.y)),this.element.setAttribute("width","".concat(o.width)),this.element.setAttribute("height","".concat(o.height)),this.path.setAttribute("d","M ".concat(s.x," ").concat(s.y," C ").concat(s.x+t.curve," ").concat(s.y,", ").concat(r.x-t.curve," ").concat(r.y,", ").concat(r.x," ").concat(r.y))},t.curve=32,t}();e.Link=i}.apply(e,i),void 0===o||(t.exports=o)},697:(t,e,n)=>{var i,o;i=[n,e,n(307),n(447),n(941),n(882)],o=function(t,e,n,i,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Node=void 0;var r=function(){function t(e,s,r){var d=this;this.inputs=[],this.outputs=[],this.id=t.currentID++,this.graph=e;var u=i.nodeDefinitions[s];this.element=document.createElement("div"),this.element.addEventListener("mousedown",(function(t){return d.onMouseDown(t)})),this.element.classList.add("graph-node");var p=document.createElement("div");p.classList.add("head");var l=document.createElement("span");l.innerHTML=u.name,p.appendChild(l),this.element.appendChild(p);var h=document.createElement("div");h.classList.add("body"),this.element.appendChild(h);for(var c=Math.max(u.inputs.length,u.outputs.length),g=function(t){var e=t+1;if(t<u.inputs.length){var i=u.inputs[t],s=a(i.type),r=new n.Pin(y.graph,y,s,n.PinType.Input);r.element.style.gridColumn="1",r.element.style.gridRow=e.toString(),y.inputs.push(r),h.appendChild(r.element);var d=document.createElement("span");if(d.innerHTML=i.name,d.style.gridColumn="2",d.style.gridRow=e.toString(),h.appendChild(d),s&(n.ValueType.Int|n.ValueType.Float|n.ValueType.String)){var p=document.createElement("span");p.classList.add("input"),p.setAttribute("role","textbox"),p.setAttribute("contenteditable","true"),p.style.gridColumn="3",p.style.gridRow=e.toString(),h.appendChild(p),r.onLinksChanged.addListener((function(t){p.style.visibility=t>0?"hidden":"visible"}))}else if(s==n.ValueType.Boolean){var l=new o.CheckBox;l.element.style.gridColumn="3",l.element.style.gridRow=e.toString(),h.appendChild(l.element),r.onLinksChanged.addListener((function(t){l.element.style.visibility=t>0?"hidden":"visible"}))}}if(t<u.outputs.length){var c=u.outputs[t],g=(s=a(c.type),document.createElement("span"));g.classList.add("text-right"),g.innerHTML=c.name,g.style.gridColumn="5",g.style.gridRow=e.toString(),h.appendChild(g);var v=new n.Pin(y.graph,y,s);v.element.style.gridColumn="6",v.element.style.gridRow=e.toString(),y.outputs.push(v),h.appendChild(v.element)}},y=this,v=0;v<c;v++)g(v);document.getElementById("graph-nodes").appendChild(this.element),this.setPosition(r)}return t.prototype.getPosition=function(){return(0,s.getTranslation)(this.element)},t.prototype.setPosition=function(t){(0,s.setTranslation)(this.element,t),this.inputs.forEach((function(t){return t.updateLinkPositions()})),this.outputs.forEach((function(t){return t.updateLinkPositions()}))},t.prototype.onMouseDown=function(t){if(t.target.classList.contains("graph-node")&&0==t.button){t.preventDefault();var e=new s.Point(t.clientX,t.clientY);this.graph.beginDrag(this,e)}},t.currentID=0,t}();function a(t){switch(t){case"Flow":default:return n.ValueType.Flow;case"Int":return n.ValueType.Int;case"Float":return n.ValueType.Float;case"String":return n.ValueType.String;case"Boolean":return n.ValueType.Boolean}}e.Node=r}.apply(e,i),void 0===o||(t.exports=o)},447:(t,e,n)=>{var i;i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.nodeDefinitions=void 0,e.nodeDefinitions={start:{name:"Start",category:"Flow",inputs:[],outputs:[{name:"",type:"Flow"}]},if:{name:"If",category:"Flow",inputs:[{name:"",type:"Flow"},{name:"Condition",type:"Boolean"}],outputs:[{name:"True",type:"Flow"},{name:"False",type:"Flow"}]},add:{name:"Add",category:"Math",inputs:[{name:"A",type:"Int"},{name:"B",type:"Int"}],outputs:[{name:"",type:"Int"}]},subtract:{name:"Subtract",category:"Math",inputs:[{name:"A",type:"Int"},{name:"B",type:"Int"}],outputs:[{name:"",type:"Int"}]},multipy:{name:"Multiply",category:"Math",inputs:[{name:"A",type:"Int"},{name:"B",type:"Int"}],outputs:[{name:"",type:"Int"}]},divide:{name:"Divide",category:"Math",inputs:[{name:"A",type:"Int"},{name:"B",type:"Int"}],outputs:[{name:"",type:"Int"}]}}}.apply(e,[n,e]),void 0===i||(t.exports=i)},307:(t,e,n)=>{var i,o;i=[n,e,n(712),n(882)],o=function(t,e,n,i){"use strict";var o,s;Object.defineProperty(e,"__esModule",{value:!0}),e.Pin=e.ValueType=e.PinType=void 0,function(t){t[t.Output=0]="Output",t[t.Input=1]="Input"}(o=e.PinType||(e.PinType={})),function(t){t[t.Flow=1]="Flow",t[t.Int=2]="Int",t[t.Float=4]="Float",t[t.String=8]="String",t[t.Boolean=16]="Boolean"}(s=e.ValueType||(e.ValueType={}));var r=function(){function t(t,e,i,r){void 0===r&&(r=o.Output);var a=this;switch(this.type=o.Output,this.links=[],this.linksChangedEvent=new n.LiteEvent,this.graph=t,this.node=e,this.type=r,this.valueType=i,this.element=document.createElement("div"),this.element.classList.add("pin"),this.type==o.Output&&this.element.classList.add("right"),this.element.addEventListener("mousedown",(function(t){return a.onMouseDown(t)})),this.element.addEventListener("mouseup",(function(t){return a.onMouseUp(t)})),this.element.addEventListener("mouseenter",(function(t){return a.onMouseEnter(t)})),this.element.addEventListener("mouseleave",(function(t){return a.onMouseExit(t)})),this.element.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.graphic=document.createElement("div"),this.graphic.classList.add("pin-graphic"),this.valueType){case s.Flow:this.graphic.classList.add("type-flow");break;case s.Int:this.graphic.classList.add("type-int");break;case s.Float:this.graphic.classList.add("type-float");break;case s.String:this.graphic.classList.add("type-string");break;case s.Boolean:this.graphic.classList.add("type-boolean")}this.element.appendChild(this.graphic)}return t.prototype.getType=function(){return this.type},t.prototype.getValueType=function(){return this.valueType},t.prototype.getNode=function(){return this.node},Object.defineProperty(t.prototype,"onLinksChanged",{get:function(){return this.linksChangedEvent.expose()},enumerable:!1,configurable:!0}),t.prototype.getPosition=function(){var t=this.graph.graphArea.getBoundingClientRect(),e=this.element.getBoundingClientRect();return new i.Point(e.left+e.width/2-t.left,e.top+e.height/2-t.top)},t.prototype.addLink=function(t){this.links.push(t),this.setGraphicSolid(!0),this.linksChangedEvent.dispatch(this.links.length)},t.prototype.breakLink=function(t){var e=this.links.indexOf(t);e>-1&&this.links.splice(e,1),this.links.length<=0&&this.setGraphicSolid(!1),this.linksChangedEvent.dispatch(this.links.length)},t.prototype.setGraphicSolid=function(t){t?this.element.classList.add("solid"):this.element.classList.remove("solid")},t.prototype.onMouseDown=function(t){if(t.target.classList.contains("pin"))if(0==t.button)t.preventDefault(),t.stopPropagation(),this.graph.beginLink(this);else if(2==t.button){t.preventDefault(),t.stopPropagation();for(var e=this.links.length,n=0;n<e;n++)this.links[0].destroy()}},t.prototype.onMouseUp=function(t){t.target.classList.contains("pin")&&0==t.button&&this.graph.endLink(this)},t.prototype.onMouseEnter=function(t){this.setGraphicSolid(!0)},t.prototype.onMouseExit=function(t){this.links.length<=0&&this.setGraphicSolid(!1)},t.prototype.updateLinkPositions=function(){var t=this;switch(this.type){case o.Output:this.links.forEach((function(e){return e.setStartPoint(t.getPosition())}));break;case o.Input:this.links.forEach((function(e){return e.setEndPoint(t.getPosition())}))}},t}();e.Pin=r}.apply(e,i),void 0===o||(t.exports=o)},882:(t,e,n)=>{var i;i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setTranslation=e.getTopLeft=e.getTranslation=e.Rect=e.Point=void 0;var n=function(){function t(t,e){this.x=null!=t?t:0,this.y=null!=e?e:0}return t.prototype.add=function(t,e){return this.x+=t,this.y+=e,this},t.prototype.subtract=function(t,e){return this.x-=t,this.y-=e,this},t}();e.Point=n;e.Rect=function(t,e,n,i){this.x=null!=t?t:0,this.y=null!=e?e:0,this.width=null!=n?n:0,this.height=null!=i?i:0},e.getTranslation=function(t){var e=window.getComputedStyle(t),i=new DOMMatrixReadOnly(e.transform);return new n(i.m41,i.m42)},e.getTopLeft=function(t){return new n(t.offsetLeft,t.offsetTop)},e.setTranslation=function(t,e){t.style.transform="translate(".concat(e.x,"px, ").concat(e.y,"px)")}}.apply(e,[n,e]),void 0===i||(t.exports=i)}},e={};!function n(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}(607)})();
//# sourceMappingURL=script.js.map